<scene>
    <audio>
        <music src="./intro/intro.ogg" id="intro"/>
    </audio>

    <checkpoints>
        <checkpoint x="136" y="-165" z="0"/>
        <checkpoint x="1920" y="-661" z="0"/>
        <checkpoint x="4736" y="-1109" z="0" radius="13"/>
    </checkpoints>

    <camera smoothing="13.5">
        <!-- Upper level -->
        <path>
            <window x1="0" x2="2048" y1="-208" y2="0"/>
            <constraint x1="180" x2="1920" y1="-120" y2="-120"/>
        </path>
        <path>
            <window x1="1792" x2="2048" y1="-480" y2="-240"/>
            <constraint x1="1920" x2="1920" y1="-360" y2="-360"/>
        </path>
        <path>
            <window x1="1792" x2="4608" y1="-720" y2="-480"/>
            <constraint x1="1920" x2="4480" y1="-600" y2="-600"/>
        </path>
    </camera>

    <gravity x="1" y="9.81"/>

    <entities>
        <textures>
            <texture id="heatman-stage" url="./heatman/tiles.png" w="256" h="128"/>
        </textures>
        <animations texture="heatman-stage">
            <animation id="bricks-big">
                <frame x="145" y="55" w="16" h="16"/>
            </animation>
            <animation id="bricks-big-bottom">
                <frame x="199" y="55" w="16" h="16"/>
            </animation>
            <animation id="bricks-big-top">
                <frame x="127" y="55" w="16" h="16"/>
            </animation>
            <animation id="bricks-small">
                <frame x="181" y="55" w="16" h="16"/>
            </animation>
            <animation id="concrete-bottom">
                <frame x="37" y="55" w="16" h="16"/>
            </animation>
            <animation id="concrete-fill">
                <frame x="19" y="55" w="16" h="16"/>
            </animation>
            <animation id="concrete-lower">
                <frame x="73" y="55" w="16" h="16"/>
            </animation>
            <animation id="concrete-top">
                <frame x="1" y="55" w="16" h="16"/>
            </animation>
            <animation id="concrete-upper">
                <frame x="55" y="55" w="16" h="16"/>
            </animation>
            <animation id="darkness">
                <frame x="235" y="19" w="16" h="16"/>
            </animation>
            <animation id="door">
                <frame x="109" y="55" w="16" h="16"/>
            </animation>
            <animation id="dr-wily-sign">
                <frame x="217" y="39" w="32" h="30"/>
            </animation>
            <animation id="hole">
                <frame x="91" y="19" w="16" h="16"/>
            </animation>
            <animation id="ladder">
                <frame x="91" y="37" w="16" h="16"/>
            </animation>
            <animation id="lava-hori-1">
                <frame x="127" y="1" w="16" h="16" duration=".11"/>
                <frame x="127" y="19" w="16" h="16" duration=".11"/>
                <frame x="127" y="37" w="16" h="16" duration=".11"/>
            </animation>
            <animation id="lava-hori-2">
                <frame x="145" y="1" w="16" h="16" duration=".11"/>
                <frame x="145" y="19" w="16" h="16" duration=".11"/>
                <frame x="145" y="37" w="16" h="16" duration=".11"/>
            </animation>
            <animation id="lava-vert-1">
                <frame x="181" y="1" w="16" h="16" duration=".11"/>
                <frame x="181" y="19" w="16" h="16" duration=".11"/>
                <frame x="181" y="37" w="16" h="16" duration=".11"/>
            </animation>
            <animation id="lava-vert-2">
                <frame x="199" y="1" w="16" h="16" duration=".11"/>
                <frame x="199" y="19" w="16" h="16" duration=".11"/>
                <frame x="199" y="37" w="16" h="16" duration=".11"/>
            </animation>
            <animation id="lava-edge">
                <frame x="163" y="1" w="16" h="16" duration=".11"/>
                <frame x="163" y="19" w="16" h="16" duration=".11"/>
                <frame x="163" y="37" w="16" h="16" duration=".11"/>
            </animation>
            <animation id="mortar-1">
                <frame x="1" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-10">
                <frame x="37" y="19" w="16" h="16"/>
            </animation>
            <animation id="mortar-2">
                <frame x="19" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-3">
                <frame x="37" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-3-shaded">
                <frame x="55" y="37" w="16" h="16"/>
            </animation>
            <animation id="mortar-4">
                <frame x="55" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-4-shaded">
                <frame x="109" y="19" w="16" h="16"/>
            </animation>
            <animation id="mortar-5">
                <frame x="73" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-5-shaded">
                <frame x="1" y="37" w="16" h="16"/>
            </animation>
            <animation id="mortar-6">
                <frame x="91" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-6-shaded">
                <frame x="19" y="37" w="16" h="16"/>
            </animation>
            <animation id="mortar-7">
                <frame x="109" y="1" w="16" h="16"/>
            </animation>
            <animation id="mortar-7-shaded">
                <frame x="37" y="37" w="16" h="16"/>
            </animation>
            <animation id="mortar-8">
                <frame x="1" y="19" w="16" h="16"/>
            </animation>
            <animation id="mortar-8-shaded">
                <frame x="55" y="19" w="16" h="16"/>
            </animation>
            <animation id="mortar-9">
                <frame x="19" y="19" w="16" h="16"/>
            </animation>
            <animation id="mortar-9-shaded">
                <frame x="73" y="19" w="16" h="16"/>
            </animation>
            <animation id="pillar">
                <frame x="163" y="55" w="16" h="16"/>
            </animation>
            <animation id="dr-wily-sign">
                <frame x="217" y="39" w="32" h="32"/>
            </animation>
            <animation id="sign-n">
                <frame x="109" y="37" w="16" h="16"/>
            </animation>
            <animation id="sign-s">
                <frame x="217" y="19" w="16" h="16"/>
            </animation>
            <animation id="sign-sw">
                <frame x="235" y="1" w="16" h="16"/>
            </animation>
            <animation id="sign-w">
                <frame x="217" y="1" w="16" h="16"/>
            </animation>
            <animation id="pho">
                <frame x="1" y="73" w="16" h="22" duration=".117"/>
                <frame x="19" y="73" w="16" h="22" duration=".117"/>
                <frame x="37" y="73" w="16" h="22" duration=".117"/>
                <frame x="55" y="73" w="16" h="22" duration=".117"/>
                <frame x="73" y="73" w="16" h="22" duration=".117"/>
                <frame x="19" y="73" w="16" h="22"/>
            </animation>
            <animation id="destructible-wall">
                <frame x="91" y="73" w="16" h="16"/>
            </animation>
        </animations>

        <entity id="pho-block">
            <geometry type="plane" w="16" h="22" w-segments="1" h-segments="1">
                <face animation="pho"/>
            </geometry>
            <collision>
                <rect x="0" y="3" w="16" h="16"/>
            </collision>
            <traits>
                <trait name="solid"/>
            </traits>
        </entity>

        <entity id="ironwall">
            <geometry type="plane" w="16" h="32" w-segments="1" h-segments="2">
                <face animation="destructible-wall">
                    <range x="*" y="*"/>
                </face>
            </geometry>
            <collision>
                <rect x="0" y="0" w="16" h="32"/>
            </collision>
            <traits>
                <trait name="solid"/>
            </traits>
        </entity>

        <entity id="door">
            <geometry type="plane" w="32" h="64" w-segments="2" h-segments="4">
                <face animation="door">
                    <range x="*" y="*"/>
                </face>
            </geometry>
            <collision>
                <rect x="0" y="0" w="32" h="64"/>
            </collision>
            <traits>
                <trait name="solid"/>
            </traits>
        </entity>

        <entity id="test">
            <geometry type="plane" w="64" h="64" w-segments="8" h-segments="8">
                <face animation="door" index="[22,24]">
                    <range x="1-4" y="1"/>
                    <range x="8" y="*"/>
                    <range x="*/2" y="4"/>
                </face>
            </geometry>
        </entity>

        <entity id="json-index-only">
            <geometry type="plane" w="64" h="64" w-segments="8" h-segments="8">
                <face animation="door" index="[0,1,2,3,4,100,112]"/>
            </geometry>
        </entity>

        <entity id="range-index-star">
            <geometry type="plane" w="64" h="64" w-segments="4" h-segments="4">
                <face animation="door">
                    <range x="*" y="*"/>
                </face>
            </geometry>
        </entity>

        <entity id="upper-level">
            <geometry type="plane" w="2048" h="240" w-segments="128" h-segments="15">
                <face animation="darkness">
                    <range x="*" y="*"/>
                </face>
                <face animation="mortar-1">
                    <range x="*" y="2"/>
                </face>
                <face animation="mortar-2">
                    <range x="*" y="3"/>
                </face>
                <face animation="mortar-3">
                    <range x="*" y="4"/>
                </face>
                <face animation="mortar-4">
                    <range x="*" y="5"/>
                </face>
                <face animation="mortar-5">
                    <range x="*" y="6-8"/>
                </face>
                <face animation="mortar-5-shaded">
                    <range x="101,121-124" y="6"/>
                    <range x="60,64,71,113-116" y="8"/>
                </face>
                <face animation="mortar-6">
                    <range x="*" y="9"/>
                </face>
                <face animation="mortar-6-shaded">
                    <range x="54-55,100,107" y="9"/>
                </face>
                <face animation="mortar-7">
                    <range x="*" y="10"/>
                </face>
                <face animation="mortar-7-shaded">
                    <range x="68,75,78,81,84,87,90,94,97,119-122" y="10"/>
                </face>
                <face animation="mortar-8">
                    <range x="*" y="11"/>
                </face>
                <face animation="mortar-8-shaded">
                    <range x="1-16,20-24,28-32,36-47,50-51,58,61,105" y="11"/>
                </face>
                <face animation="mortar-9">
                    <range x="*" y="12"/>
                </face>
                <face animation="mortar-9-shaded">
                    <range x="111-118,125" y="12"/>
                </face>
                <face animation="mortar-10">
                    <range x="*" y="13"/>
                </face>
                <face animation="hole">
                    <range x="79" y="4"/>
                    <range x="53" y="5"/>
                    <range x="43,67,73,85,93" y="6"/>
                    <range x="57" y="7"/>
                    <range x="47" y="8"/>
                    <range x="62" y="10"/>
                </face>
                <face animation="lava-hori-1">
                    <range x="1,5,7,11,16,18,20,22,24,26,28,32,34,36,39-49/2,52-94/2" y="13"/>
                </face>
                <face animation="lava-hori-2">
                    <range x="2,6,8,12,15,17,19,23,25,27,29,33,35,40,44,48,53-93/2" y="13"/>
                </face>
                <face animation="lava-edge">
                    <range x="95" y="13"/>
                </face>
                <face animation="lava-vert-1">
                    <range x="95" y="14"/>
                </face>
                <face animation="lava-vert-2">
                    <range x="95" y="15"/>
                </face>
                <face animation="concrete-lower">
                    <range x="111-125" y="13"/>
                </face>
                <face animation="concrete-fill">
                    <range x="119-124" y="12"/>
                </face>
                <face animation="concrete-upper">
                    <range x="1-16,20-24,28-32,36-47,50-51" y="12"/>
                </face>
                <face animation="concrete-lower">
                    <range x="1-94" y="14"/>
                </face>
                <face animation="concrete-top">
                    <range x="119-124" y="11"/>
                    <range x="3-4,9-10,13-14,21,30-31,37-38,42,46,50-51" y="12"/>
                </face>
                <face animation="concrete-fill">
                    <range x="3-4,9-10,13-14,21,30-31,37-38,42,46,50-51" y="13"/>
                </face>
                <face animation="concrete-bottom">
                    <range x="119-124" y="13"/>
                    <range x="3-4,9-10,13-14,21,30-31,37-38,42,46,50-51" y="14"/>
                </face>
                <face animation="pillar">
                    <range x="101" y="7"/>
                    <range x="60,64,71" y="9"/>
                    <range x="54-55,60,64,71,100,107" y="10"/>
                    <range x="54-55,60,64,68,71,75,78,81,84,87,90,94,97" y="11"/>
                    <range x="54-55,58,60-61,64,68,71,75,78,81,84,87,90,94,105" y="12"/>
                </face>
                <face animation="bricks-small">
                    <range x="1-2,11-22,25-30,33-40,43-96,113-128" y="1"/>
                    <range x="1-2" y="1-10"/>
                    <range x="127-128" y="*"/>
                    <range x="123-124" y="8-9"/>
                    <range x="113-114,125" y="15"/>
                </face>
                <face animation="bricks-big">
                    <range x="115-118" y="6"/>
                    <range x="121-122" y="7"/>
                    <range x="113-116" y="9"/>
                </face>
                <face animation="bricks-big-bottom">
                    <range x="11-22,25-30,33-40,43-96,113-126" y="2"/>
                    <range x="1-2" y="11"/>
                    <range x="123-124" y="10"/>
                </face>
                <face animation="bricks-big-top">
                    <range x="123-124" y="7"/>
                    <range x="113-114,125" y="14"/>
                    <range x="1-6" y="15"/>
                </face>
                <face animation="ladder">
                    <range x="126" y="13-15"/>
                </face>
            </geometry>
        </entity>

        <entity id="drwily-sign">
            <geometry type="plane" w="32" h="32" w-segments="1" h-segments="1">
                <face animation="dr-wily-sign" index="[0]"/>
            </geometry>
        </entity>
    </entities>
    <layout>
        <entities>
            <entity id="test" instance-id="my-test-entity" x="13" y="-17" z="-0.1"/>
            <entity id="json-index-only" instance-id="json-index-only"/>
            <entity id="range-index-star"/>

            <entity id="upper-level" x="1024" y="-120" z="-0.1"/>
            <entity id="door" x="4608" y="-1088"/>
            <entity id="door" x="4864" y="-1088"/>

            <entity id="pho-block" x="4312" y="-584">
                <trait name="disappearing" off="6" on="2" offset="-18.5"/>
            </entity>

            <entity id="ironwall" x="2648" y="-624"/>
            <entity id="drwily-sign" x="4592" y="-1024" z="0"/>
        </entities>
        <spawner x="680" y="-88" interval="4" simultaneous="2">
            <character id="Telly"/>
        </spawner>
        <behaviors>
            <deathzones>
                <rect x="272" y="-200" w="96" h="16"/>
                <rect x="1400" y="-200" w="240" h="16"/>
                <rect x="1656" y="-248" w="304" h="16"/>
            </deathzones>
            <climbables>
                <rect x="2008" y="-296" w="0" h="208"/>
                <rect x="4408" y="-952" w="0" h="112"/>
            </climbables>
            <solids>
                <rect x="136" y="-184" w="240" h="16"/>
                <rect x="1976" y="-408" w="16" h="16"/>
                <rect x="2008" y="-408" w="16" h="16"/>
            </solids>
        </behaviors>
    </layout>
</scene>
